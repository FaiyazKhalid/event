{"version":3,"sources":["instagram.js"],"names":[],"mappings":";;AAAA,IAAI,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;;AAEjC,MAAM,CAAC,OAAO,GAAG,UAAS,GAAG,EAAE,EAAE,EAAC;AAC9B,QAAI,MAAM,GAAG,EAAE,CAAC;AAChB,OAAG,CAAC,GAAG,CAAC,WAAW,EAAE,UAAS,GAAG,EAAE,GAAG,EAAC;AACnC,WAAG,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC;KAC1C,CAAC,CAAC;;AAEH,OAAG,CAAC,IAAI,CAAC,WAAW,EAAE,UAAS,GAAG,EAAE,GAAG,EAAC;AACpC,WAAG,CAAC,IAAI,CAAC,EAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,EAAC,CAAC,CAAC;AACpD,eAAO,CAAC,GAAG,CAAC,EAAC,GAAG,EAAE,oCAAoC,GAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,GAAC,0DAA0D,EAAE,IAAI,EAAE,IAAI,EAAC,EACnJ,UAAS,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE;AAC1B,gBAAG,QAAQ,IAAI,QAAQ,CAAC,UAAU,IAAI,GAAG,EAAE;AACvC,uBAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACpB,kBAAE,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;aAChC;SACJ,CAAC,CAAC;AACP,WAAG,CAAC,GAAG,EAAE,CAAC;KACb,CAAC,CAAC;AACH,UAAM,CAAC,kBAAkB,GAAG,YAAW;AACnC,eAAO,CAAC,IAAI,CAAC,EAAC,GAAG,EAAE,4CAA4C,EAAE,IAAI,EAAE,IAAI,EAAC,EACxE,UAAU,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE;AAC3B,gBAAI,GAAG,EAAE;AACL,uBAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,GAAG,CAAC,CAAC;aAC5C,MAAM;AACH,uBAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AAClB,uBAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;aAC3C;SACJ,CAAC,CAAC;KACV,CAAA;AACG,WAAO,MAAM,CAAC;CACrB,CAAC;AACF,IAAI,IAAI,GAAG;AACP,aAAS,EAAE,kCAAkC;AAC7C,iBAAa,EAAE,kCAAkC;AACjD,gBAAY,EAAE,mCAAmC;AACjD,UAAM,EAAE,OAAO;AACf,UAAM,EAAE,KAAK;AACb,aAAS,EAAE,UAAU;CACxB,CAAC;;AAEF,IAAI,UAAU,GAAG;AACb,aAAS,EAAE,kCAAkC;AAC7C,gBAAY,EAAE,OAAO;AACrB,iBAAa,EAAE,WAAW;CAC7B,CAAC","file":"instagram.js","sourcesContent":["var request = require('request');\n\nmodule.exports = function(app, io){\n    var module = {};\n    app.get('/callback', function(req, res){\n        res.end(req[\"query\"]['hub.challenge']);\n    });\n\n    app.post('/callback', function(req, res){\n        res.json({success: true, kind: req.body[0].object});\n        request.get({url: \"https://api.instagram.com/v1/tags/\"+req.body[0][\"object_id\"]+\"/media/recent?client_id=73cec7670f2e427a9de45a33ef5c01bf\", form: data},\n            function(err, response, body) {\n                if(response && response.statusCode == 200) {\n                    console.log(\"POST\");\n                    io.sockets.emit('img', body);\n                }\n            });\n        res.end();\n    });\n    module.requestToInstagram = function() {\n        request.post({url: \"https://api.instagram.com/v1/subscriptions\", form: data},\n            function (err, response, body) {\n                if (err) {\n                    console.log(\"Failed to subscribe:\", err);\n                } else {\n                    console.log(body);\n                    console.log(\"Successfully subscribed.\");\n                }\n            });\n    }\n        return module;\n};\nvar data = {\n    client_id: \"73cec7670f2e427a9de45a33ef5c01bf\",\n    client_secret: \"addaf928b6134a4a8eb549bb8f49b302\",\n    callback_url: \"http://ae9452dc.ngrok.io/callback\",\n    aspect: \"media\",\n    object: \"tag\",\n    object_id: \"nofilter\"\n};\n\nvar authParams = {\n    client_id: \"73cec7670f2e427a9de45a33ef5c01bf\",\n    redirect_uri: \"/auth\",\n    response_type: \"INSTAGRAM\"\n};\n\n"],"sourceRoot":"/Users/vsokoltsov/node_projects/event_feed_sample/src"}